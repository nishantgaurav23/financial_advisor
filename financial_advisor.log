2024-11-13 00:30:17,425 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 00:30:23,389 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 00:30:23,495 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 00:30:23,875 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 00:30:23,875 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_detect_financial_scenario'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 25, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 86, in query
    scenario_type = self._detect_financial_scenario(question)
AttributeError: 'RAGEngine' object has no attribute '_detect_financial_scenario'
2024-11-13 00:43:01,513 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 00:43:08,462 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 00:43:08,542 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 00:43:08,904 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 00:43:08,904 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_detect_financial_scenario'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 90, in query
    scenario_type = self._detect_financial_scenario(question)
AttributeError: 'RAGEngine' object has no attribute '_detect_financial_scenario'
2024-11-13 00:47:29,757 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 00:47:35,102 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 00:47:35,184 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 00:47:35,533 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 00:47:35,534 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_detect_financial_scenario'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 90, in query
    scenario_type = self._detect_financial_scenario(question)
AttributeError: 'RAGEngine' object has no attribute '_detect_financial_scenario'
2024-11-13 01:05:45,290 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:05:51,250 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:05:51,317 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:05:51,675 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:05:51,675 - src.rag.engine - ERROR - Error in query: type object 'FinancialService' has no attribute '_detect_financial_scenario'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 90, in query
    scenario_type = fs._detect_financial_scenario(question)
AttributeError: type object 'FinancialService' has no attribute '_detect_financial_scenario'
2024-11-13 01:07:35,603 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:07:40,938 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:07:40,975 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:07:41,418 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:07:41,418 - src.rag.engine - ERROR - Error in query: _detect_financial_scenario() missing 1 required positional argument: 'query'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 90, in query
    scenario_type = fs._detect_financial_scenario(question)
TypeError: _detect_financial_scenario() missing 1 required positional argument: 'query'
2024-11-13 01:08:54,409 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:08:59,790 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:08:59,820 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:09:00,237 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:09:00,237 - src.rag.engine - ERROR - Error in query: _detect_financial_scenario() missing 1 required positional argument: 'query'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 91, in query
    scenario_type = fs._detect_financial_scenario(question)
TypeError: _detect_financial_scenario() missing 1 required positional argument: 'query'
2024-11-13 01:10:09,778 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:10:14,551 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:10:14,581 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:10:14,975 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:10:14,975 - src.rag.engine - ERROR - Error in query: _detect_financial_scenario() missing 1 required positional argument: 'self'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 91, in query
    scenario_type = fs._detect_financial_scenario(query=question)
TypeError: _detect_financial_scenario() missing 1 required positional argument: 'self'
2024-11-13 01:28:44,399 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:28:47,477 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:28:47,560 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:28:47,910 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:28:47,910 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:28:47,910 - src.rag.engine - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 116, in query
    "context": self._get_enhanced_context(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_enhanced_context'
2024-11-13 01:28:47,910 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 116, in query
    "context": self._get_enhanced_context(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_enhanced_context'
2024-11-13 01:29:18,910 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:29:22,239 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:29:22,269 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:29:22,625 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:29:22,625 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:29:22,625 - src.rag.engine - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 117, in query
    "context": self._get_enhanced_context(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_enhanced_context'
2024-11-13 01:29:22,625 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 117, in query
    "context": self._get_enhanced_context(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_enhanced_context'
2024-11-13 01:30:58,484 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:31:01,761 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:31:01,851 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:31:02,222 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:31:02,222 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:31:02,222 - src.rag.engine - ERROR - Error processing query: 'FinancialService' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 117, in query
    "context": self.financial_service._get_enhanced_context(scenario_type),
AttributeError: 'FinancialService' object has no attribute '_get_enhanced_context'
2024-11-13 01:31:02,223 - src.rag.engine - ERROR - Error in query: 'FinancialService' object has no attribute '_get_enhanced_context'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 117, in query
    "context": self.financial_service._get_enhanced_context(scenario_type),
AttributeError: 'FinancialService' object has no attribute '_get_enhanced_context'
2024-11-13 01:32:26,695 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:32:33,285 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:32:33,313 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:32:33,669 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:32:33,669 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:34:41,355 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:34:46,696 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:34:46,743 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:34:47,209 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:34:47,209 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:36:28,967 - src.rag.engine - ERROR - Error processing query: One input key expected got ['calculations', 'question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 115, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['calculations', 'question', 'context']
2024-11-13 01:36:28,974 - src.rag.engine - ERROR - Error in query: One input key expected got ['calculations', 'question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 115, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['calculations', 'question', 'context']
2024-11-13 01:38:18,780 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:38:23,864 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:38:23,918 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:38:24,327 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:38:24,328 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:40:09,883 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 01:40:15,523 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 01:40:15,553 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 01:40:15,933 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 01:40:15,933 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 01:41:55,007 - src.rag.engine - INFO - LLM response generated successfully
2024-11-13 13:34:01,635 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 13:34:08,969 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 13:34:09,078 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 13:34:09,441 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 13:34:09,441 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 13:38:08,268 - src.rag.engine - ERROR - Error processing query: One input key expected got ['calculations', 'question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 129, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['calculations', 'question', 'context']
2024-11-13 13:38:08,291 - src.rag.engine - ERROR - Error in query: One input key expected got ['calculations', 'question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 29, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 129, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['calculations', 'question', 'context']
2024-11-13 14:30:25,855 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 14:30:32,388 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 14:30:32,814 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 14:30:33,161 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 14:30:33,161 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 14:30:33,161 - src.rag.engine - INFO - Context: 
                Consider retirement planning factors:
                - Current age and timeline
                - Savings and contributions
                - Investment strategy
                - Risk tolerance
                - Social Security benefits
                - Healthcare costs
                - Required Minimum Distributions
                
2024-11-13 14:45:03,312 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 14:45:10,239 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 14:45:10,269 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 14:45:10,640 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 14:45:10,640 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 14:45:10,640 - src.rag.engine - INFO - Context: 
                Consider retirement planning factors:
                - Current age and timeline
                - Savings and contributions
                - Investment strategy
                - Risk tolerance
                - Social Security benefits
                - Healthcare costs
                - Required Minimum Distributions
                
2024-11-13 14:48:46,671 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'context', 'calculations']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 132, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context', 'calculations']
2024-11-13 14:48:46,741 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'context', 'calculations']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 132, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context', 'calculations']
2024-11-13 15:00:20,611 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 15:00:27,368 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 15:00:27,461 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 15:00:27,835 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 15:00:27,835 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 15:00:27,835 - src.rag.engine - INFO - Context: 
                Consider retirement planning factors:
                - Current age and timeline
                - Savings and contributions
                - Investment strategy
                - Risk tolerance
                - Social Security benefits
                - Healthcare costs
                - Required Minimum Distributions
                
2024-11-13 15:00:29,556 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'calculations'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 138, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'calculations'}
2024-11-13 15:00:29,575 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'calculations'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 138, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'calculations'}
2024-11-13 15:02:01,960 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 15:02:08,078 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 15:02:08,104 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 15:02:08,424 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 15:02:08,424 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 15:02:08,424 - src.rag.engine - INFO - Context: 
                Consider retirement planning factors:
                - Current age and timeline
                - Savings and contributions
                - Investment strategy
                - Risk tolerance
                - Social Security benefits
                - Healthcare costs
                - Required Minimum Distributions
                
2024-11-13 15:02:09,186 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'calculations'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 132, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'calculations'}
2024-11-13 15:02:09,187 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'calculations'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 132, in query
    result = self.qa_chain({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'calculations'}
2024-11-13 15:10:06,202 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 15:10:11,738 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 15:10:11,766 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 15:10:12,141 - src.rag.engine - INFO - Processing query: I want to retire in 20 years, how much do I need to save?...
2024-11-13 15:10:12,141 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-13 15:13:52,079 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'calculations', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 135, in query
    result = self.qa_chain.invoke(chain_input)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'calculations', 'context']
2024-11-13 15:13:52,122 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'calculations', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 135, in query
    result = self.qa_chain.invoke(chain_input)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'calculations', 'context']
2024-11-13 15:18:38,665 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 15:18:43,427 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 15:18:43,536 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 15:22:34,378 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 230, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 15:22:34,384 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 230, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 15:57:43,606 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 15:57:52,723 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 15:57:52,839 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 16:03:21,041 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 224, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 16:03:21,100 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 224, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 16:09:11,891 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 16:09:19,771 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 16:09:19,864 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 16:13:20,793 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 224, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 16:13:20,825 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 30, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 224, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 16:19:47,024 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 16:19:54,527 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 16:19:54,652 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 16:48:51,977 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 16:48:58,698 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 16:48:58,781 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 16:52:53,461 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 366, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 16:52:53,520 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'context']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 35, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 366, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'context']
2024-11-13 17:05:51,408 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 17:05:56,929 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 17:05:57,009 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-13 17:19:53,422 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-13 17:20:02,068 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-13 17:20:02,163 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 00:03:05,644 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 00:03:11,284 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 00:03:11,394 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 00:03:11,689 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-14 00:03:11,689 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 00:10:41,139 - src.rag.engine - INFO - Query processed successfully
2024-11-14 00:14:23,533 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 00:14:27,403 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 00:14:27,492 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 00:14:27,773 - src.rag.engine - INFO - Detected scenario: budgeting
2024-11-14 00:14:27,773 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 00:21:21,704 - src.rag.engine - INFO - Query processed successfully
2024-11-14 00:33:56,973 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 00:34:01,355 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 00:34:01,435 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 00:34:01,714 - src.rag.engine - INFO - Detected scenario: budgeting
2024-11-14 00:34:01,714 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 00:40:38,217 - src.rag.engine - INFO - Query processed successfully
2024-11-14 00:44:45,293 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 00:44:51,648 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 00:44:51,729 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 00:44:51,967 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 00:44:51,968 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 00:53:54,517 - src.rag.engine - INFO - Query processed successfully
2024-11-14 01:32:47,653 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 01:32:51,741 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 01:32:51,837 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 01:32:52,092 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 01:32:52,092 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 01:43:25,312 - src.rag.engine - INFO - Query processed successfully
2024-11-14 01:45:32,692 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 01:45:38,993 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 01:45:39,094 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 01:45:39,344 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 01:45:39,344 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 01:55:22,558 - src.rag.engine - INFO - Query processed successfully
2024-11-14 17:12:16,425 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 17:13:46,516 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 17:14:46,820 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 17:14:49,123 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 17:14:54,463 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 17:14:54,543 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 17:16:34,452 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 17:16:36,020 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 17:16:40,727 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 17:16:40,787 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 17:16:40,848 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 17:16:45,462 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 17:16:45,772 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 17:22:10,801 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 17:22:12,543 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 17:22:15,805 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 17:22:15,886 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 17:22:15,949 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 17:22:20,492 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 17:22:21,198 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 17:22:22,101 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-14 17:22:22,122 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-14 17:24:20,791 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-14 17:24:20,792 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 17:32:38,585 - src.rag.engine - INFO - Query processed successfully
2024-11-14 17:34:00,874 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 17:34:07,877 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 17:34:56,101 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 17:36:28,722 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 17:36:28,741 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 17:57:36,648 - src.rag.engine - INFO - Query processed successfully
2024-11-14 18:00:47,146 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 18:00:49,914 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 18:00:57,842 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 18:00:57,919 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 18:00:57,983 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 18:01:03,993 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-14 18:01:04,018 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-14 18:01:04,273 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 18:01:04,361 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 18:01:04,362 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 18:02:42,878 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 18:02:42,879 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 18:10:39,319 - src.rag.engine - INFO - Query processed successfully
2024-11-14 18:17:02,651 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 18:17:02,656 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 18:38:47,444 - src.rag.engine - INFO - Query processed successfully
2024-11-14 18:41:03,056 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 18:41:50,776 - src.rag.engine - INFO - Detected scenario: investment
2024-11-14 18:41:50,785 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 20:42:10,024 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 20:42:10,309 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 20:42:14,116 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 20:42:14,190 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 20:42:14,271 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 20:42:18,364 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 20:42:19,017 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-14 20:42:19,054 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-14 20:42:19,155 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 20:43:05,988 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-14 20:43:05,989 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 20:52:07,635 - src.rag.engine - INFO - Query processed successfully
2024-11-14 20:54:42,280 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 20:54:42,296 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 21:14:03,331 - src.rag.engine - INFO - Query processed successfully
2024-11-14 21:34:53,216 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 21:34:53,224 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 21:52:57,848 - src.rag.engine - INFO - Query processed successfully
2024-11-14 22:09:08,814 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 22:09:11,115 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 22:09:17,651 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 22:09:17,759 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 22:09:18,284 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 22:09:19,147 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 22:20:53,121 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 22:20:53,690 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 22:21:00,242 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 22:21:00,325 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 22:21:00,788 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 22:21:01,451 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-14 22:21:01,481 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-14 22:21:01,690 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 22:21:58,692 - src.rag.engine - INFO - Detected scenario: retirement
2024-11-14 22:21:58,692 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 22:29:25,404 - src.rag.engine - INFO - Query processed successfully
2024-11-14 22:30:02,409 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 22:30:07,030 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 22:33:50,844 - src.rag.engine - INFO - Detected scenario: estate_planning
2024-11-14 22:33:50,846 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 22:37:53,214 - src.ui.interface - ERROR - Error downloading report: 'RAGEngine' object has no attribute 'report_path'
2024-11-14 22:54:00,698 - src.rag.engine - INFO - Query processed successfully
2024-11-14 23:26:36,809 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-14 23:26:37,984 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-14 23:26:41,042 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-14 23:26:41,073 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-14 23:26:41,453 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-14 23:26:41,987 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-14 23:26:42,008 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-14 23:26:42,285 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-14 23:27:59,566 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-14 23:27:59,577 - src.rag.engine - INFO - Generating response from LLM
2024-11-14 23:36:08,403 - src.rag.engine - INFO - Query processed successfully
2024-11-15 00:13:58,918 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 00:13:59,403 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 00:14:05,273 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 00:14:05,302 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 00:14:05,727 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 00:14:06,318 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 00:14:06,347 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 00:14:06,717 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 00:14:46,915 - src.rag.engine - INFO - Detected scenario: tax_planning
2024-11-15 00:14:46,916 - src.rag.engine - INFO - Generating response from LLM
2024-11-15 00:22:38,536 - src.rag.engine - INFO - Query processed successfully
2024-11-15 06:37:04,982 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 06:37:07,360 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 06:37:11,902 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 06:37:11,992 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 06:49:13,639 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 06:49:16,039 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 06:49:21,107 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 06:49:21,218 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 06:49:55,428 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 06:49:57,989 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 06:50:02,285 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 06:50:02,383 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 06:53:33,011 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 06:53:34,796 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 06:53:42,998 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 06:53:43,095 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 06:53:43,528 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 06:53:44,188 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 06:53:44,226 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 06:53:44,789 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 06:54:25,033 - src.rag.engine - ERROR - Error processing query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 562, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 631, in _manage_conversation_context
    self._update_scenario_history(scenario_type, question)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in _update_scenario_history
    self.memory.chat_memory.add_user_message(
TypeError: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 06:54:25,033 - src.rag.engine - ERROR - Error in query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 562, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 631, in _manage_conversation_context
    self._update_scenario_history(scenario_type, question)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in _update_scenario_history
    self.memory.chat_memory.add_user_message(
TypeError: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 06:54:25,033 - src.ui.interface - ERROR - Error processing query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 07:05:21,260 - src.rag.engine - ERROR - Error processing query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 562, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 631, in _manage_conversation_context
    self._update_scenario_history(scenario_type, question)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in _update_scenario_history
    question,
TypeError: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 07:05:21,272 - src.rag.engine - ERROR - Error in query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 562, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 631, in _manage_conversation_context
    self._update_scenario_history(scenario_type, question)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in _update_scenario_history
    question,
TypeError: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 07:05:21,272 - src.ui.interface - ERROR - Error processing query: add_user_message() got an unexpected keyword argument 'additional_kwargs'
2024-11-15 07:05:50,261 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:05:51,370 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:05:59,231 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:05:59,262 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:05:59,679 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:06:00,176 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:06:00,197 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:06:00,494 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:06:16,437 - src.rag.engine - ERROR - Error processing query: 'RAGEngine' object has no attribute '_prepare_enhanced_input'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 578, in query
    enhanced_input = self._prepare_enhanced_input(
AttributeError: 'RAGEngine' object has no attribute '_prepare_enhanced_input'
2024-11-15 07:06:16,438 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_prepare_enhanced_input'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 578, in query
    enhanced_input = self._prepare_enhanced_input(
AttributeError: 'RAGEngine' object has no attribute '_prepare_enhanced_input'
2024-11-15 07:06:16,438 - src.ui.interface - ERROR - Error processing query: 'RAGEngine' object has no attribute '_prepare_enhanced_input'
2024-11-15 07:09:16,893 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:09:17,849 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:09:27,183 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:09:27,212 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:09:27,623 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:09:27,991 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:09:28,012 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:09:28,577 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:09:40,395 - src.rag.engine - ERROR - Error processing query: _get_enhanced_prompt_template() takes 1 positional argument but 5 were given
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 578, in query
    enhanced_input = self._get_enhanced_prompt_template(
TypeError: _get_enhanced_prompt_template() takes 1 positional argument but 5 were given
2024-11-15 07:09:40,395 - src.rag.engine - ERROR - Error in query: _get_enhanced_prompt_template() takes 1 positional argument but 5 were given
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 578, in query
    enhanced_input = self._get_enhanced_prompt_template(
TypeError: _get_enhanced_prompt_template() takes 1 positional argument but 5 were given
2024-11-15 07:09:40,395 - src.ui.interface - ERROR - Error processing query: _get_enhanced_prompt_template() takes 1 positional argument but 5 were given
2024-11-15 07:17:46,807 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:17:48,927 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:17:55,416 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:17:55,447 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:17:55,858 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:17:56,460 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:17:56,482 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:17:56,683 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:20:37,897 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'input'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'input'}
2024-11-15 07:20:37,909 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'input'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'input'}
2024-11-15 07:20:37,916 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'input'}
2024-11-15 07:28:27,661 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:28:29,217 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:28:35,660 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:28:35,694 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:28:36,158 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:28:36,701 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:28:36,722 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:28:37,094 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:31:32,215 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:31:34,412 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:31:39,699 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:31:39,727 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:31:40,391 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:31:40,721 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:31:40,742 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:31:41,126 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:32:13,555 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 07:32:13,562 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 07:32:13,563 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'question'}
2024-11-15 07:35:51,940 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:35:54,031 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:35:59,306 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:35:59,337 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:36:00,360 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:36:00,386 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:36:00,618 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 07:36:00,634 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:36:00,635 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:36:07,833 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 07:36:07,835 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 621, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 07:36:07,836 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'question'}
2024-11-15 07:39:04,158 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 07:39:05,146 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 07:39:10,662 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 07:39:10,689 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 07:39:11,093 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 07:39:11,467 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 07:39:11,490 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 07:39:11,902 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 08:19:01,735 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 08:19:04,190 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 08:19:09,546 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 08:19:09,650 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 08:19:10,134 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 08:19:10,712 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 08:19:10,739 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 08:19:10,871 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 08:19:27,398 - src.rag.engine - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_scenario_history'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 605, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 671, in _manage_conversation_context
    "scenario_history": self._get_scenario_history(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:19:27,399 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_get_scenario_history'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 605, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 671, in _manage_conversation_context
    "scenario_history": self._get_scenario_history(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:19:27,400 - src.ui.interface - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:21:06,000 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 08:21:07,485 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 08:21:13,142 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 08:21:13,172 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 08:21:14,181 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 08:21:14,211 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 08:21:14,600 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 08:21:16,474 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 08:21:16,475 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 08:21:23,488 - src.rag.engine - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_scenario_history'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 605, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 671, in _manage_conversation_context
    "scenario_history": self._get_scenario_history(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:21:23,488 - src.rag.engine - ERROR - Error in query: 'RAGEngine' object has no attribute '_get_scenario_history'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 605, in query
    conversation_context = self._manage_conversation_context(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 671, in _manage_conversation_context
    "scenario_history": self._get_scenario_history(scenario_type),
AttributeError: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:21:23,489 - src.ui.interface - ERROR - Error processing query: 'RAGEngine' object has no attribute '_get_scenario_history'
2024-11-15 08:22:58,272 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 08:23:00,558 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 08:23:05,586 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 08:23:05,619 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 08:23:06,073 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 08:23:06,605 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 08:23:06,633 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 08:23:06,871 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 10:05:39,902 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 10:05:41,817 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 10:05:46,858 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 10:05:46,977 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 10:05:47,391 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 10:05:47,980 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 10:05:48,038 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 10:05:48,237 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 10:14:40,586 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in query
    # Get LLM response
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 10:14:40,594 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 646, in query
    # Get LLM response
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 10:14:40,595 - src.ui.interface - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
2024-11-15 10:23:15,037 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 10:23:16,757 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 10:23:22,165 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 10:23:22,194 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 10:23:22,648 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 10:23:23,159 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 10:23:23,178 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 10:23:23,619 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 10:23:34,106 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 10:23:34,109 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 10:23:34,110 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'chat_history'}
2024-11-15 10:25:57,459 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 10:25:58,519 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 10:26:03,420 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 10:26:03,445 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 10:26:03,948 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 10:26:04,252 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 10:26:04,271 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 10:26:04,772 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 10:26:13,922 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 10:26:13,923 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 10:26:13,923 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'chat_history'}
2024-11-15 10:28:46,830 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 10:28:48,524 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 10:28:49,694 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 10:28:49,721 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 10:28:50,115 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 10:28:50,512 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 10:28:50,530 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 10:28:51,115 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 10:37:36,545 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 10:37:36,557 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 674, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 10:37:36,557 - src.ui.interface - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
2024-11-15 10:57:33,932 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 10:57:35,587 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 10:57:41,580 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 10:57:41,634 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:00:49,392 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:00:50,320 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:00:54,655 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:00:54,682 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:00:55,121 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:00:55,573 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:00:55,593 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:00:55,867 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:01:09,487 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 653, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 11:01:09,488 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'chat_history'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 653, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'chat_history'}
2024-11-15 11:01:09,488 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'chat_history'}
2024-11-15 11:05:34,909 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:05:35,956 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:05:41,462 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:05:41,490 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:09:07,671 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:09:12,616 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:09:12,640 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:09:14,151 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:20:38,451 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:20:40,155 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:20:44,155 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:20:44,226 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:20:44,740 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:20:45,152 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:20:45,171 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:20:45,440 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:27:52,687 - src.rag.engine - ERROR - Error processing query: One input key expected got ['chat_history', 'question']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 644, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['chat_history', 'question']
2024-11-15 11:27:52,694 - src.rag.engine - ERROR - Error in query: One input key expected got ['chat_history', 'question']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 644, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['chat_history', 'question']
2024-11-15 11:27:52,695 - src.ui.interface - ERROR - Error processing query: One input key expected got ['chat_history', 'question']
2024-11-15 11:31:04,187 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:31:06,552 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:31:14,156 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:31:14,258 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:31:15,291 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:31:15,325 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:31:15,781 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:31:17,590 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:31:17,592 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:38:12,776 - src.rag.engine - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 644, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 11:38:12,781 - src.rag.engine - ERROR - Error in query: One input key expected got ['question', 'chat_history']
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 644, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 165, in invoke
    final_outputs: Dict[str, Any] = self.prep_outputs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 466, in prep_outputs
    self.memory.save_context(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 72, in save_context
    input_str, output_str = self._get_input_output(inputs, outputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/chat_memory.py", line 47, in _get_input_output
    prompt_input_key = get_prompt_input_key(inputs, self.memory_variables)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/memory/utils.py", line 19, in get_prompt_input_key
    raise ValueError(f"One input key expected got {prompt_input_keys}")
ValueError: One input key expected got ['question', 'chat_history']
2024-11-15 11:38:12,781 - src.ui.interface - ERROR - Error processing query: One input key expected got ['question', 'chat_history']
2024-11-15 11:44:43,999 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:44:45,604 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:44:52,949 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:44:52,978 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:48:16,682 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:48:17,289 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:48:22,877 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:48:22,903 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:48:23,305 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:48:23,888 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:48:23,925 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:48:24,152 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:49:31,020 - src.rag.engine - ERROR - Error processing query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 11:49:31,021 - src.rag.engine - ERROR - Error in query: Missing some input keys: {'question'}
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 158, in invoke
    self._validate_inputs(inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 290, in _validate_inputs
    raise ValueError(f"Missing some input keys: {missing_keys}")
ValueError: Missing some input keys: {'question'}
2024-11-15 11:49:31,022 - src.ui.interface - ERROR - Error processing query: Missing some input keys: {'question'}
2024-11-15 11:50:36,128 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:50:37,512 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:50:42,979 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:50:43,007 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:50:43,418 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:50:43,820 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:50:43,839 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:50:44,362 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:50:54,370 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:50:54,372 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:50:54,372 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:53:59,420 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 11:54:00,552 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 11:54:05,784 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 11:54:05,810 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 11:54:06,173 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 11:54:06,576 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 11:54:06,597 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 11:54:06,964 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 11:54:22,642 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:54:22,644 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:54:22,644 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 11:56:01,816 - src.rag.engine - ERROR - Error processing query: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    enhanced_input = self._prepare_enhanced_input(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 458, in _prepare_enhanced_input
    previous_question = history_context.get("last_question", "")
AttributeError: 'str' object has no attribute 'get'
2024-11-15 11:56:01,817 - src.rag.engine - ERROR - Error in query: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    enhanced_input = self._prepare_enhanced_input(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 458, in _prepare_enhanced_input
    previous_question = history_context.get("last_question", "")
AttributeError: 'str' object has no attribute 'get'
2024-11-15 11:56:01,818 - src.ui.interface - ERROR - Error processing query: 'str' object has no attribute 'get'
2024-11-15 12:07:52,457 - src.rag.engine - ERROR - Error processing query: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    enhanced_input = self._prepare_enhanced_input(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 458, in _prepare_enhanced_input
    previous_question = history_context.get("last_question", "")
AttributeError: 'str' object has no attribute 'get'
2024-11-15 12:07:52,458 - src.rag.engine - ERROR - Error in query: 'str' object has no attribute 'get'
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 645, in query
    enhanced_input = self._prepare_enhanced_input(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 458, in _prepare_enhanced_input
    previous_question = history_context.get("last_question", "")
AttributeError: 'str' object has no attribute 'get'
2024-11-15 12:07:52,458 - src.ui.interface - ERROR - Error processing query: 'str' object has no attribute 'get'
2024-11-15 12:37:12,440 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 12:37:13,702 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 12:37:18,252 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 12:37:18,280 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 12:37:18,707 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 12:37:19,262 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 12:37:19,280 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 12:37:19,568 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 12:37:33,473 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 642, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:37:33,482 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 52, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 642, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:37:33,482 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:47:00,898 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 12:47:01,046 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 12:47:05,390 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 12:47:05,493 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 12:47:05,918 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 12:47:06,565 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 12:47:06,599 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 12:47:07,006 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 12:47:36,116 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 642, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:47:36,125 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 642, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:47:36,126 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:55:44,387 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 12:55:45,611 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 12:55:51,510 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 12:55:51,542 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 12:55:52,002 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 12:55:52,524 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 12:55:52,548 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 12:55:52,788 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 12:56:13,064 - src.rag.engine - INFO - Processing message at index 0: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?, type: <class 'langchain_core.messages.human.HumanMessage'>
2024-11-15 12:56:14,357 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 661, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:56:14,359 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 661, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:56:14,359 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:58:23,337 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 12:58:24,523 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 12:58:30,814 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 12:58:30,841 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 12:58:31,246 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 12:58:31,650 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 12:58:31,765 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 12:58:32,326 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 12:58:48,037 - src.rag.engine - INFO - Processing message at index 0: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?, type: <class 'langchain_core.messages.human.HumanMessage'>
2024-11-15 12:58:48,992 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 664, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:58:48,994 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 664, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 12:58:48,995 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:05:01,782 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 13:05:03,837 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 13:05:08,499 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 13:05:08,527 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 13:05:08,957 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 13:05:09,540 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 13:05:09,564 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 13:05:10,371 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 13:05:22,760 - src.rag.engine - INFO - >>>>>>>>>>>>>>> Raw Messages: [HumanMessage(content='I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?', additional_kwargs={}, response_metadata={})]
2024-11-15 13:05:22,760 - src.rag.engine - INFO - >>>>>>>>>>>>>>> Formatted Messages: [HumanMessage(content='I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?', additional_kwargs={}, response_metadata={})]
2024-11-15 13:05:24,280 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:05:24,288 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:05:24,289 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:21:24,232 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 13:21:25,806 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 13:21:31,011 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 13:21:31,040 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 13:21:31,463 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 13:21:32,081 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 13:21:32,102 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 13:21:32,319 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 13:21:46,627 - src.rag.engine - INFO - >>>>>>>>>>>>>>> Raw Messages: [HumanMessage(content='I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?', additional_kwargs={}, response_metadata={})]
2024-11-15 13:21:46,627 - src.rag.engine - INFO - >>>>>>>>>>>>>>> Formatted Messages: [HumanMessage(content='I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement?', additional_kwargs={}, response_metadata={})]
2024-11-15 13:21:48,052 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:21:48,054 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got  of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 660, in query
    result = self.qa_chain.invoke({
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:21:48,054 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got  of type <class 'str'>
2024-11-15 13:35:31,052 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 13:35:33,328 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 13:35:37,479 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 13:35:37,512 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 13:35:37,965 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 13:35:38,495 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 13:35:38,524 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 13:35:38,904 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
2024-11-15 13:35:52,960 - src.rag.engine - INFO - Processed chat history messages: 1
2024-11-15 13:36:29,888 - src.rag.engine - ERROR - Error processing query: variable chat_history should be a list of base messages, got 
Human: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement? of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 632, in query
    result = self.qa_chain(chain_input)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got 
Human: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement? of type <class 'str'>
2024-11-15 13:36:29,898 - src.rag.engine - ERROR - Error in query: variable chat_history should be a list of base messages, got 
Human: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement? of type <class 'str'>
Traceback (most recent call last):
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 53, in wrapper
    return func(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/src/rag/engine.py", line 632, in query
    result = self.qa_chain(chain_input)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/conversational_retrieval/base.py", line 170, in _call
    answer = self.combine_docs_chain.run(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 611, in run
    return self(kwargs, callbacks=callbacks, tags=tags, metadata=metadata)[
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/base.py", line 138, in _call
    output, extra_return_dict = self.combine_docs(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/combine_documents/stuff.py", line 259, in combine_docs
    return self.llm_chain.predict(callbacks=callbacks, **inputs), {}
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 318, in predict
    return self(kwargs, callbacks=callbacks)[self.output_key]
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/_api/deprecation.py", line 182, in warning_emitting_wrapper
    return wrapped(*args, **kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 389, in __call__
    return self.invoke(
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 170, in invoke
    raise e
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/base.py", line 160, in invoke
    self._call(inputs, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 126, in _call
    response = self.generate([inputs], run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 135, in generate
    prompts, stop = self.prep_prompts(input_list, run_manager=run_manager)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain/chains/llm.py", line 197, in prep_prompts
    prompt = self.prompt.format_prompt(**selected_inputs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 785, in format_prompt
    messages = self.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 1228, in format_messages
    message = message_template.format_messages(**kwargs)
  File "/Users/saketsaurabh/Documents/Financial Advisor Project Folder/financial_advisor/venv/lib/python3.9/site-packages/langchain_core/prompts/chat.py", line 246, in format_messages
    raise ValueError(msg)
ValueError: variable chat_history should be a list of base messages, got 
Human: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement? of type <class 'str'>
2024-11-15 13:36:29,899 - src.ui.interface - ERROR - Error processing query: variable chat_history should be a list of base messages, got 
Human: I am a 37 year old male. I earn Rs. 116000 per month. Can you assisit me in planning my retirement? of type <class 'str'>
2024-11-15 13:50:20,528 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 13:50:29,092 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 13:50:29,123 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 13:58:58,493 - httpx - INFO - HTTP Request: GET https://api.gradio.app/gradio-messaging/en "HTTP/1.1 200 OK"
2024-11-15 13:59:00,770 - sentence_transformers.SentenceTransformer - INFO - Load pretrained SentenceTransformer: BAAI/bge-small-en
2024-11-15 13:59:10,180 - faiss.loader - INFO - Loading faiss with AVX2 support.
2024-11-15 13:59:10,209 - faiss.loader - INFO - Successfully loaded faiss with AVX2 support.
2024-11-15 13:59:10,629 - httpx - INFO - HTTP Request: GET https://checkip.amazonaws.com/ "HTTP/1.1 200 "
2024-11-15 13:59:11,302 - httpx - INFO - HTTP Request: GET http://127.0.0.1:7860/startup-events "HTTP/1.1 200 OK"
2024-11-15 13:59:11,333 - httpx - INFO - HTTP Request: HEAD http://127.0.0.1:7860/ "HTTP/1.1 200 OK"
2024-11-15 13:59:11,491 - httpx - INFO - HTTP Request: GET https://api.gradio.app/pkg-version "HTTP/1.1 200 OK"
